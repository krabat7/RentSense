import logging


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from dotenv import dotenv_values


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from sqlalchemy import DECIMAL, Column, ForeignKey, create_engine, text, JSON, Boolean, Integer, BigInteger, String, DateTime


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from sqlalchemy.dialects.mysql import TEXT, TIMESTAMP


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from sqlalchemy.exc import IntegrityError, SQLAlchemyError


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from sqlalchemy.orm import declarative_base, relationship, scoped_session, sessionmaker


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

Base = declarative_base()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

from pathlib import Path


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

env_path = Path(__file__).parent.parent.parent / '.env'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

env = dotenv_values(env_path)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

DBTYPE = env.get('DB_TYPE') or 'mysql+pymysql'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

LOGIN = env.get('DB_LOGIN') or 'root'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

PASS = env.get('DB_PASS') or 'rootpassword'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

IP = env.get('DB_IP') or 'localhost'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

PORT = env.get('DB_PORT') or '3307'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

DBNAME = env.get('DB_NAME') or 'rentsense'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

DATABASE_URL = f'{DBTYPE}://{LOGIN}:{PASS}@{IP}:{PORT}/{DBNAME}?charset=utf8mb4'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Offers(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'offers'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, nullable=False, unique=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    price = Column(DECIMAL(15, 2), nullable=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    category = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    views_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    photos_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    floor_number = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    floors_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    publication_at = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    price_changes = Column(JSON, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    address = relationship("Addresses", back_populates="offer", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    realty_inside = relationship("Realty_inside", back_populates="offer", uselist=False, cascade="all, delete-orphan")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    realty_outside = relationship("Realty_outside", back_populates="offer", uselist=False, cascade="all, delete-orphan")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    realty_details = relationship("Realty_details", back_populates="offer", uselist=False, cascade="all, delete-orphan")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offers_details = relationship("Offers_details", back_populates="offer", uselist=False, cascade="all, delete-orphan")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    developer = relationship("Developers", back_populates="offer", uselist=False, cascade="all, delete-orphan")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    photos = relationship("Photos", back_populates="offer", cascade="all, delete-orphan", order_by="Photos.order_index")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Addresses(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'addresses'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    county = Column(String(255), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    district = Column(String(255), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    street = Column(String(255), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    house = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    metro = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    travel_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    travel_time = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    address = Column(JSON, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    coordinates = Column(JSON, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="address", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Realty_inside(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'realty_inside'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    repair_type = Column(String(255), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    total_area = Column(DECIMAL(11, 2), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    living_area = Column(DECIMAL(11, 2), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    kitchen_area = Column(DECIMAL(11, 2), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    ceiling_height = Column(DECIMAL(11, 2), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    balconies = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    loggias = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    rooms_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    separated_wc = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    combined_wc = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    windows_view = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="realty_inside", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Realty_outside(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'realty_outside'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    build_year = Column(Integer, nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    entrances = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    material_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    parking_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    garbage_chute = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    lifts_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    passenger_lifts = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cargo_lifts = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="realty_outside", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Realty_details(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'realty_details'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    realty_type = Column(String(255), nullable=True, index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    project_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    heat_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    gas_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_apartment = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_penthouse = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_mortgage_allowed = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_premium = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_emergency = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    renovation_programm = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    finish_date = Column(JSON, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="realty_details", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Offers_details(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'offers_details'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    agent_name = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    deal_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    flat_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    sale_type = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_duplicate = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    description = Column(TEXT, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    payment_period = Column(String(50), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    lease_term_type = Column(String(50), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    deposit = Column(DECIMAL(11, 2), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    prepay_months = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    utilities_included = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    client_fee = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    agent_fee = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="offers_details", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class Developers(Base):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    __tablename__ = 'developers'


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    id = Column(Integer, primary_key=True, autoincrement=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    name = Column(String(255), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    review_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    total_rate = Column(DECIMAL(2, 1), nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    buildings_count = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    foundation_year = Column(Integer, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    is_reliable = Column(Boolean, nullable=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    updated_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    offer = relationship("Offers", back_populates="developer", uselist=False)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

class DatabaseManager:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def __init__(self, db_url: str):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        self.engine = create_engine(db_url, pool_pre_ping=True, future=True, connect_args={"connect_timeout": 10})


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        self.Session = scoped_session(sessionmaker(bind=self.engine))


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        try:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            self.create_tables()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        except Exception as e:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            logging.warning(f"Could not create tables on init: {e}. Will retry later.")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def create_tables(self):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        existing_tables = self.get_existing_tables()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        Base.metadata.create_all(self.engine)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def get_existing_tables(self):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        session = self.Session()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        try:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            connection = session.connection()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            existing_tables = connection.execute(text(


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                "SELECT table_name FROM information_schema.tables WHERE table_schema = DATABASE()")).fetchall()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            return {table_name for (table_name,) in existing_tables}


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        finally:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.close()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def insert(self, *instances):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        session = self.Session()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        try:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.add_all(instances)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.commit()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            logging.info("Insert successful")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        except (IntegrityError, SQLAlchemyError) as e:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.rollback()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if isinstance(e, IntegrityError) and 'Duplicate entry' in str(e.orig):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                logging.error(f"Integrity error during insertion: Duplicate entry")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            else:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                logging.error(f"Error during insertion: {e}", exc_info=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        finally:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.close()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def update(self, model_class, filter_conditions, update_values):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        session = self.Session()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        try:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            updated_rows = session.query(model_class).filter_by(**filter_conditions).update(update_values)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if updated_rows == 0:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                logging.error("No records found to update with conditions: %s", filter_conditions)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                return


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.commit()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            logging.info("Update successful")


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        except SQLAlchemyError as e:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.rollback()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            logging.error(f"Error during update: {e}", exc_info=True)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        finally:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.close()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def select(self, model_class, filter=None, filter_by=None, limit=None, order_by=None, distinct=False):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        session = self.Session()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        try:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            query = session.query(model_class)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if distinct:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                query = query.distinct()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if filter_by:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                query = query.filter_by(**filter_by)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            elif filter:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                query = query.filter(*filter)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if order_by:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                query = query.order_by(order_by)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            if limit:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

                query = query.limit(limit)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            return query.all()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        finally:


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

            session.close()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    def close(self):


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

        self.Session.remove()


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

model_classes = {


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "offers": Offers,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "addresses": Addresses,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "realty_inside": Realty_inside,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "realty_outside": Realty_outside,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "realty_details": Realty_details,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "offers_details": Offers_details,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "developers": Developers,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

    "photos": Photos,


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

}


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")




class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

DB = DatabaseManager(DATABASE_URL)


class Photos(Base):
    __tablename__ = 'photos'

    id = Column(Integer, primary_key=True, autoincrement=True)
    cian_id = Column(BigInteger, ForeignKey('offers.cian_id'), index=True)
    url = Column(String(1000), nullable=False)  # URL оригинального фото
    local_path = Column(String(500), nullable=True)  # Путь к скачанному файлу (если скачано)
    order_index = Column(Integer, nullable=True)  # Порядковый номер фото (0, 1, 2...)
    is_downloaded = Column(Boolean, default=False)  # Скачано ли фото локально
    downloaded_at = Column(DateTime, nullable=True)  # Когда было скачано
    created_at = Column(DateTime, server_default=text('CURRENT_TIMESTAMP'))
    
    offer = relationship("Offers", back_populates="photos")

