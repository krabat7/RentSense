# –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —á–µ–∫–ø–æ–∏–Ω—Ç–∞ –¥–∏–ø–ª–æ–º–∞

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **–°–µ—Ä–≤–µ—Ä**: –†–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ `89.110.92.128`
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: MySQL –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚ö†Ô∏è **MLflow**: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (`mlflow==2.8.1`), –Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚ö†Ô∏è **DVC-remote**: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (`dvc==3.66.0`, `dvc-s3==3.1.0`), –Ω–æ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è **–°—Ö–µ–º—ã**: –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ `raw/core/features` (–æ–¥–Ω–∞ —Å—Ö–µ–º–∞)
- ‚úÖ **–¢–∞–±–ª–∏—Ü—ã**:
  - ‚úÖ `offers` (–∞–Ω–∞–ª–æ–≥ `listings`)
  - ‚úÖ `photos`
  - ‚ùå `geo_poi` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  - ‚ùå `snapshots` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 3. –ü–∞—Ä—Å–µ—Ä –¶–∏–∞–Ω–∞
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `app/parser/` (main.py, pagecheck.py, tools.py, database.py)
- ‚úÖ **Rate-limit/—Ä–µ—Ç—Ä–∞–∏**: –°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–æ–∫—Å–∏, —Ä–µ—Ç—Ä–∞–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `tools.py`, –ª–æ–≥–∏ –≤ `rentsense.log`
- ‚úÖ **Cron**: –ù–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ `app/scheduler/crontab.py` (–∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
- ‚úÖ **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ `cian_id`, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –ø–æ–ª–µ `is_duplicate`

### 4. EDA v1
- ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**: –ù–µ—Ç –Ω–æ—É—Ç–±—É–∫–æ–≤ –≤ `ml/eda/`

### 5. –ì–µ–æ-—Ñ–∏—á–∏ v0
- ‚úÖ **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–Ω—Ç—Ä–∞**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `ml/features/geo_features.py` (`calculate_distance_from_center`)
- ‚úÖ **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –º–µ—Ç—Ä–æ**: –ß–µ—Ä–µ–∑ `travel_time` –≤ —Ç–∞–±–ª–∏—Ü–µ `addresses`
- ‚úÖ **–†–∞–π–æ–Ω –≤ –ú–æ—Å–∫–≤–µ**: –ü–æ–ª—è `district` –∏ `county` –≤ —Ç–∞–±–ª–∏—Ü–µ `addresses`

### 6. –ë–µ–π–∑–ª–∞–π–Ω –º–æ–¥–µ–ª–∏
- ‚ö†Ô∏è **CatBoost/LightGBM**: –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö, –Ω–æ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±—É—á–µ–Ω—ã
- ‚ùå **–ú–µ—Ç—Ä–∏–∫–∏**: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚ùå **–ö–≤–∞–Ω—Ç–∏–ª–∏ (P10/P50/P90)**: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚ùå **API**: –ó–∞–≥–ª—É—à–∫–∞ `{'price': 0.0}` –≤ `app/api/main.py`

### 7. CI/CD –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- ‚ö†Ô∏è **DVC**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- ‚ö†Ô∏è **MLflow**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å—Ç—å, –Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚ö†Ô∏è **CI**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –µ—Å—Ç—å (`black`, `flake8`, `pytest`), –Ω–æ CI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —á–µ–∫–ø–æ–∏–Ω—Ç–∞:

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

#### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DVC
```bash
dvc init
dvc remote add -d s3remote s3://bucket-name/path
# –∏–ª–∏ –¥–ª—è MinIO
dvc remote add -d minio s3://bucket-name/path --endpoint-url http://minio:9000
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MLflow
```python
# –°–æ–∑–¥–∞—Ç—å mlflow_config.py –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–¥
import mlflow
mlflow.set_tracking_uri("http://mlflow-server:5000")
mlflow.set_experiment("rentsense")
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ EDA –Ω–æ—É—Ç–±—É–∫–∞
- –°–æ–∑–¥–∞—Ç—å `ml/eda/eda_v1.ipynb` —Å –∞–Ω–∞–ª–∏–∑–æ–º:
  - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ (heatmap, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
  - –í—ã—è–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤ (IQR, Z-score)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (train/test split –ø–æ –¥–∞—Ç–µ)

#### 4. –û–±—É—á–µ–Ω–∏–µ –±–µ–π–∑–ª–∞–π–Ω –º–æ–¥–µ–ª–µ–π
- –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –≤ `ml/models/train_baseline.py`:
  - CatBoost –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
  - LightGBM –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
  - –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫: MSE, MAE, MAPE, R¬≤, RMSE
  - –†–∞—Å—á–µ—Ç –∫–≤–∞–Ω—Ç–∏–ª–µ–π –æ—à–∏–±–æ–∫: P10, P50, P90

#### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ML –≤ API
- –û–±–Ω–æ–≤–∏—Ç—å `app/api/main.py`:
  - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
  - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ `preprocess.py`

### –í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):

#### 6. –°—Ö–µ–º—ã –ë–î
- –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã `raw`, `core`, `features`
- –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ö–µ–º—ã

#### 7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `geo_poi` –¥–ª—è —Ç–æ—á–µ–∫ –∏–Ω—Ç–µ—Ä–µ—Å–∞
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `snapshots` –¥–ª—è —Å–Ω–∏–º–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º–µ–Ω–∏

#### 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD
- –°–æ–∑–¥–∞—Ç—å `.github/workflows/ci.yml`
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏: black, flake8, pytest

---

## üìä –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ì–æ—Ç–æ–≤–æ | –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å |
|-----------|--------|----------|---------------|
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | 2 | 2 | 0 |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | 2 | 1 | 3 |
| –ü–∞—Ä—Å–µ—Ä | 5 | 0 | 0 |
| EDA | 0 | 0 | 1 |
| –ì–µ–æ-—Ñ–∏—á–∏ | 3 | 0 | 0 |
| ML –º–æ–¥–µ–ª–∏ | 0 | 1 | 2 |
| CI/CD | 0 | 1 | 2 |
| **–ò–¢–û–ì–û** | **12** | **5** | **8** |

**–ü—Ä–æ—Ü–µ–Ω—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: ~48% (12/25 –ø—É–Ω–∫—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã)

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:

1. **–°–æ–∑–¥–∞—Ç—å EDA –Ω–æ—É—Ç–±—É–∫** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —á–µ–∫–ø–æ–∏–Ω—Ç–∞
2. **–û–±—É—á–∏—Ç—å –±–µ–π–∑–ª–∞–π–Ω –º–æ–¥–µ–ª–∏** - –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ML
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å MLflow –∏ DVC** - —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å ML –≤ API** - —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ end-to-end

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —á–µ–∫–ø–æ–∏–Ω—Ç–∞:

```
RentSense/
‚îú‚îÄ‚îÄ app/                    # ‚úÖ –ì–æ—Ç–æ–≤–æ
‚îÇ   ‚îú‚îÄ‚îÄ parser/            # ‚úÖ –ü–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ api/               # ‚ö†Ô∏è –ù—É–∂–Ω–∞ ML –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ scheduler/         # ‚úÖ Cron –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚îú‚îÄ‚îÄ ml/
‚îÇ   ‚îú‚îÄ‚îÄ eda/               # ‚ùå –ü—É—Å—Ç–æ - –Ω—É–∂–µ–Ω –Ω–æ—É—Ç–±—É–∫
‚îÇ   ‚îú‚îÄ‚îÄ features/          # ‚úÖ –ì–µ–æ-—Ñ–∏—á–∏ –µ—Å—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ models/            # ‚ùå –ü—É—Å—Ç–æ - –Ω—É–∂–Ω—ã –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ data/                  # ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ—Å—Ç—å
‚îú‚îÄ‚îÄ docker-compose.prod.yml # ‚úÖ –ì–æ—Ç–æ–≤–æ
‚îî‚îÄ‚îÄ requirements.txt       # ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –µ—Å—Ç—å
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –°–æ–∑–¥–∞—Ç—å EDA –Ω–æ—É—Ç–±—É–∫ –≤ `ml/eda/`
2. –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MLflow –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å DVC –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
5. –û–±–Ω–æ–≤–∏—Ç—å API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏

